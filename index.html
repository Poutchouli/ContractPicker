<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aide √† la D√©cision Strat√©gique</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <header class="main-header">
        <h1><i class="fa-solid fa-compass-drafting"></i> Aide √† la D√©cision Strat√©gique</h1>
        <div>
            <button id="btn-ai-settings" class="btn-header" title="Param√®tres IA"><i class="fa-solid fa-brain"></i></button>
            <span id="status-indicator" class="status-indicator"></span>
        </div>
    </header>

    <main class="main-layout-container">

        <!-- Colonne Principale: Configuration et R√©sultats -->
        <div class="main-column">
            <!-- WIDGET 1: Configuration & Simulation -->
            <div class="widget" data-widget-id="config">
                <div class="card">
                    <h2 class="card-header"><i class="fa-solid fa-sliders"></i> Configuration & Simulation</h2>
                    <div class="card-content">
                        <!-- Contenu existant -->
                        <div class="form-group">
                            <label for="type-contrat">1. Type de Contrat</label>
                            <select id="type-contrat"></select>
                        </div>
                        <div id="memo-container" class="memo-box" style="display:none;"></div>
                        <div id="questionnaire-container"></div>
                        <h3 class="sub-header">2. Param√®tres de Simulation</h3>
                        <form id="form-simulation" class="simulation-grid">
                            <div class="form-group"><label for="sim-volume-nb">Volume N&B / mois</label><input type="number" id="sim-volume-nb" value="5000" required></div>
                            <div class="form-group"><label for="sim-volume-couleur">Volume Couleur / mois</label><input type="number" id="sim-volume-couleur" value="500" required></div>
                            <div class="form-group grid-span-2"><label for="sim-duree">Dur√©e de comparaison (mois)</label><input type="number" id="sim-duree" value="36" required></div>
                        </form>
                        <h3 class="sub-header">3. Pond√©ration des Crit√®res</h3>
                        <div id="ponderation-container">
                            <div class="form-group"><label for="poids-cout">üêñ Importance : <span id="valeur-poids-cout">50</span>%</label><input type="range" id="poids-cout" min="0" max="100" value="50" class="slider"></div>
                            <div class="form-group"><label for="poids-qualite">‚è±Ô∏è Importance : <span id="valeur-poids-qualite">20</span>%</label><input type="range" id="poids-qualite" min="0" max="100" value="20" class="slider"></div>
                            <div class="form-group"><label for="poids-modele">‚öôÔ∏è Importance : <span id="valeur-poids-modele">15</span>%</label><input type="range" id="poids-modele" min="0" max="100" value="15" class="slider"></div>
                            <div class="form-group"><label for="poids-ressenti">ü§î Importance : <span id="valeur-poids-ressenti">15</span>%</label><input type="range" id="poids-ressenti" min="0" max="100" value="15" class="slider"></div>
                        </div>
                        <button type="submit" form="form-simulation" class="btn btn-principal full-width"><i class="fa-solid fa-play"></i> Lancer la Comparaison</button>
                    </div>
                </div>
            </div>

            <!-- WIDGET 4: R√©sultats & Analyse -->
            <div class="widget" data-widget-id="resultats">
                <div class="card" id="section-resultats" style="display:none;">
                    <h2 class="card-header"><i class="fa-solid fa-chart-pie"></i> Vue d'Ensemble</h2>
                    <div class="card-content">
                        <div class="chart-container"><canvas id="graphique-scores"></canvas></div>
                        <div class="chart-container" style="margin-top: 2rem;"><canvas id="graphique-radar"></canvas></div>
                        <div class="table-container"><table id="tableau-resultats"></table></div>
                    </div>
                </div>
                 <div class="card" id="section-analyse" style="display:none;">
                    <h2 class="card-header"><i class="fa-solid fa-lightbulb"></i> Conclusion & Recommandation</h2>
                    <div class="card-content" id="analyse-container"></div>
                </div>
            </div>
        </div>

        <!-- Colonne Lat√©rale: Gestion et Saisie -->
        <div class="sidebar-column">
            <!-- WIDGET 2: Gestion des Offres -->
            <div class="widget" data-widget-id="offres">
                 <div class="card">
                    <h2 class="card-header"><i class="fa-solid fa-list-check"></i> Gestion des Offres</h2>
                    <div class="card-content">
                        <div class="actions-fichiers">
                            <button id="btn-ajouter-offre" class="btn btn-principal"><i class="fa-solid fa-plus"></i> Nouvelle Offre</button>
                            <button id="btn-simuler-offre" class="btn btn-simulation" title="Ajouter une offre concurrente fictive"><i class="fa-solid fa-wand-magic-sparkles"></i> Simuler</button>
                        </div>
                        <div id="actions-selection" class="actions-selection-box" style="display:none;">
                            <button id="btn-grouper-selection" class="btn btn-info"><i class="fa-solid fa-object-group"></i> Grouper</button>
                            <button id="btn-supprimer-selection" class="btn btn-danger"><i class="fa-solid fa-trash-can"></i> Supprimer</button>
                        </div>
                        <div id="liste-offres"></div>
                    </div>
                </div>
            </div>
            <!-- WIDGET 5: Poubelle -->
            <div class="widget" data-widget-id="poubelle">
                <div id="poubelle-zone" class="poubelle-zone">
                    <i class="fa-solid fa-trash-can"></i>
                    <span>Glissez ici pour supprimer</span>
                </div>
            </div>
        </div>
    </main>

    <!-- Fen√™tre Modale pour la Saisie d'Offre -->
    <div id="offre-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Ajouter une Nouvelle Offre</h3>
                <button id="btn-close-offre-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-offre">
                    <input type="hidden" id="offre-id">
                    <div class="form-grid">
                        <div class="form-group"><label for="prestataire">Prestataire</label><input type="text" id="prestataire" required></div>
                        <div class="form-group"><label for="fabricant">Fabricant</label><select id="fabricant" required></select></div>
                        <div class="form-group"><label for="modele">Mod√®le</label><select id="modele" required></select><small id="prix-indicatif-modele"></small></div>
                        <div class="form-group"><label for="gti-heures">GTI (heures)</label><input type="number" id="gti-heures" required></div>
                    </div>
                    <h4 class="sub-header">Conditions du Contrat</h4>
                     <div class="form-grid">
                        <div class="form-group"><label for="duree">Dur√©e (mois)</label><input type="number" id="duree" required></div>
                        <div class="form-group"><label for="location">Loyer (‚Ç¨/mois)</label><input type="number" step="0.01" id="location" required></div>
                        <div class="form-group"><label for="cout-nb">Co√ªt N&B (‚Ç¨)</label><input type="number" step="0.00001" id="cout-nb" required></div>
                        <div class="form-group"><label for="cout-couleur">Co√ªt Couleur (‚Ç¨)</label><input type="number" step="0.00001" id="cout-couleur" required></div>
                    </div>
                    <h4 class="sub-header">Co√ªts Additionnels</h4>
                    <div id="couts-additionnels-container"></div>
                    <button type="button" id="btn-ajouter-cout" class="btn btn-secondaire"><i class="fa-solid fa-plus"></i> Ajouter un co√ªt</button>
                    <hr>
                    <div class="form-group"><label for="notes">Notes & Clauses</label><textarea id="notes"></textarea></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="btn-annuler-modal" class="btn btn-secondaire">Annuler</button>
                <button type="submit" form="form-offre" class="btn btn-principal"><i class="fa-solid fa-save"></i> Enregistrer</button>
            </div>
        </div>
    </div>


    <!-- Fen√™tre Modale pour les Param√®tres IA (inchang√©e) -->
    <div id="ai-settings-modal" class="modal-overlay" style="display: none;">
        <!-- Contenu existant -->
    </div>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="js/app.js" type="module"></script>
</body>
</html>
